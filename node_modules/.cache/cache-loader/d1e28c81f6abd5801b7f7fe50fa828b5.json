{"remainingRequest":"/Users/akin/smallbizweek/node_modules/babel-loader/lib/index.js!/Users/akin/smallbizweek/node_modules/vue-loader/lib/selector.js?type=script&index=0!/Users/akin/smallbizweek/src/components/GoogleMap.vue","dependencies":[{"path":"/Users/akin/smallbizweek/src/components/GoogleMap.vue","mtime":1524937434016},{"path":"/Users/akin/smallbizweek/package.json","mtime":1524923600490},{"path":"/Users/akin/smallbizweek/node_modules/cache-loader/dist/cjs.js","mtime":1524883008152},{"path":"/Users/akin/smallbizweek/node_modules/babel-loader/lib/index.js","mtime":1519636541000},{"path":"/Users/akin/smallbizweek/node_modules/vue-loader/lib/selector.js","mtime":1520395331000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: \"GoogleMap\",\n  data: function data() {\n    return {\n      // default to Montreal to keep it simple\n      // change this to whatever makes sense\n      center: {\n        lat: 38.8938,\n        lng: 77.0310\n      },\n      markers: [],\n      places: [],\n      currentPlace: null\n    };\n  },\n  mounted: function mounted() {\n    this.geolocate();\n    this.loadKMLs();\n  },\n  methods: {\n    // receives a place object via the autocomplete component\n    setPlace: function setPlace(place) {\n      this.currentPlace = place;\n    },\n    addMarker: function addMarker() {\n      if (this.currentPlace) {\n        var marker = {\n          lat: this.currentPlace.geometry.location.lat(),\n          lng: this.currentPlace.geometry.location.lng()\n        };\n        this.markers.push({\n          position: marker,\n          icon: 'https://raw.githubusercontent.com/akinhwan/smallbizweek/master/src/assets/building_one.svg'\n        });\n        this.places.push(this.currentPlace);\n        this.center = marker;\n        this.currentPlace = null;\n      }\n    },\n    geolocate: function geolocate() {\n      var _this = this;\n\n      navigator.geolocation.getCurrentPosition(function (position) {\n        _this.center = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n      });\n    },\n    loadKMLs: function loadKMLs() {\n      var _this2 = this;\n\n      var that = this;\n\n      var _loop = function _loop(i) {\n        var link = \"https://raw.githubusercontent.com/akinhwan/smallbizweek/master/src/assets/zip\".concat(20000 + i, \".kml\");\n        console.log(link);\n        axios.get(link).then(function () {\n          _this2.$refs.mapRef.$mapPromise.then(function (map) {\n            that.kml = new google.maps.KmlLayer({\n              url: link,\n              visibility: 'visible',\n              preserveViewport: true,\n              map: map\n            });\n          });\n        }).catch(function () {\n          return console.log('not found');\n        });\n      };\n\n      for (var i = 1; i <= 55; i++) {\n        _loop(i);\n      }\n    }\n  }\n};",{"version":3,"sources":["GoogleMap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;QAEA;wBACA;;AAEA;AACA;;;aACA;;eACA;cACA;oBACA,AACA;AAPA;AASA;8BACA;SACA;SACA;AAEA;;AAEA;uCACA;0BACA;AACA;oCACA;6BACA;;mDAEA;mDACA,AACA;AAHA;;;gBAIA;;8BACA;sBACA;4BACA;AACA;AACA;;AACA;;mEACA;;+BAEA;+BACA,AACA;AAHA;AAIA;AACA;;AACA;;iBACA;;;kHAEA;oBACA;yCACA;8DACA;;mBAEA;0BACA;gCACA;mBACA,AACA;AALA;AAMA;AACA;6BACA;;;;;AAbA;AAeA;AACA,AACA;AA5CA;AAlBA","file":"GoogleMap.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div>\n      <h2>Search and add a pin</h2>\n      <label>\n        <gmap-autocomplete\n          @place_changed=\"setPlace\">\n        </gmap-autocomplete>\n        <button @click=\"addMarker\">Add</button>\n      </label>\n      <br/>\n\n    </div>\n    <br>\n    <gmap-map\n      ref = \"mapRef\"\n      :center=\"center\"\n      :zoom=\"15\"\n      style=\"width:100%;  height: 700px;\"\n      map-type-id=\"roadmap\"\n    >\n      <gmap-marker\n        :key=\"index\"\n        v-for=\"(m, index) in markers\"\n        :position=\"m.position\"\n        :icon=\"m.icon\"\n        @click=\"center=m.position\"\n      ></gmap-marker>\n    </gmap-map>\n  </div>\n</template>\n<script>\nimport axios from 'axios';\nexport default {\n  name: \"GoogleMap\",\n  data() {\n    return {\n      // default to Montreal to keep it simple\n      // change this to whatever makes sense\n      center: { lat: 38.8938, lng: 77.0310 },\n      markers: [],\n      places: [],\n      currentPlace: null\n    };\n  },\n\n  mounted() {\n    this.geolocate();\n    this.loadKMLs();\n  },\n\n  methods: {\n    // receives a place object via the autocomplete component\n    setPlace(place) {\n      this.currentPlace = place;\n    },\n    addMarker() {\n      if (this.currentPlace) {\n        const marker = {\n          lat: this.currentPlace.geometry.location.lat(),\n          lng: this.currentPlace.geometry.location.lng()\n        };\n        this.markers.push({ position: marker, icon: 'https://raw.githubusercontent.com/akinhwan/smallbizweek/master/src/assets/building_one.svg' });\n        this.places.push(this.currentPlace);\n        this.center = marker;\n        this.currentPlace = null;\n      }\n    },\n    geolocate: function() {\n      navigator.geolocation.getCurrentPosition(position => {\n        this.center = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n      });\n    },\n    loadKMLs(){\n      let that = this;\n      for(let i = 1; i <= 55; i++){\n        const link = `https://raw.githubusercontent.com/akinhwan/smallbizweek/master/src/assets/zip${20000 + i}.kml`;\n        console.log(link);\n        axios.get(link).then(()=>{\n            this.$refs.mapRef.$mapPromise.then((map) => {\n              that.kml = new google.maps.KmlLayer({\n                url: link,\n                visibility: 'visible',\n                preserveViewport: true,\n                map: map\n              })\n            })\n          }\n        ).catch(()=> console.log('not found'));\n      }\n\n    }\n  }\n};\n</script>\n\n<style scoped>\nh2{\n    margin: 0;\n}\n</style>\n"]}]}